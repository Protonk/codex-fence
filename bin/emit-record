#!/usr/bin/env bash
set -euo pipefail

# Thin wrapper delegating to the Rust implementation. Mirrors other bin helpers
# so probes can rely on a consistent location regardless of build profile.

script_dir=$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd)
repo_root=$(cd "${script_dir}/.." >/dev/null 2>&1 && pwd)

binary="${repo_root}/target/release/emit-record"
if [[ ! -x "${binary}" ]]; then
  binary="${repo_root}/target/debug/emit-record"
fi

if [[ ! -x "${binary}" ]]; then
  echo "emit-record binary not found. Build it with 'cargo build --release'." >&2
  exit 1
fi

exec "${binary}" "$@"
